/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./node_modules/babel-loader/lib/index.js!./src/worker.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/babel-loader/lib/index.js!./src/worker.js":
/*!*******************************************************!*\
  !*** ./node_modules/babel-loader/lib!./src/worker.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _constants = __webpack_require__(/*! ./constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _actors = __webpack_require__(/*! ./actors */ \"./src/actors/index.js\");\n\nvar _gameboard = __webpack_require__(/*! ./gameboard */ \"./src/gameboard.js\");\n\nvar _gameboard2 = _interopRequireDefault(_gameboard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar isTraining = false;\n\nonmessage = function onmessage(e) {\n  if (isTraining) return;\n  isTraining = true;\n  var _e$data = e.data,\n      chickenData = _e$data.chickenData,\n      foxData = _e$data.foxData,\n      grid = _e$data.grid;\n\n\n  var chickenActor = (0, _actors.buildChickenActor)(chickenData.type);\n  chickenActor.deserialize(chickenData);\n\n  var foxActor = (0, _actors.buildFoxActor)(foxData.type);\n  foxActor.deserialize(foxData);\n\n  var board = new _gameboard2.default(grid);\n  board.addFox(foxActor);\n  board.addChicken(chickenActor);\n\n  for (var i = 0; i < _constants2.default.TRAINING_STEPS; i++) {\n    board.run(board.reset);\n    if (i % 1000 === 0) {\n      postMessage({\n        done: false,\n        progress: Math.floor(100 * i / _constants2.default.TRAINING_STEPS)\n      });\n    }\n  }\n\n  postMessage({\n    done: true,\n    chickenData: chickenActor.serialize(),\n    foxData: foxActor.serialize()\n  });\n  isTraining = false;\n};\n\n//# sourceURL=webpack:///./src/worker.js?./node_modules/babel-loader/lib");

/***/ }),

/***/ "./src/actors/a-star.js":
/*!******************************!*\
  !*** ./src/actors/a-star.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _base = __webpack_require__(/*! ./base */ \"./src/actors/base.js\");\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./src/actors/utils.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Uses A* pathing algorithm to find shortest path to the target\n// Throw in a random move every 10 steps\nvar AStarActor = function (_Actor) {\n  _inherits(AStarActor, _Actor);\n\n  function AStarActor(value) {\n    _classCallCheck(this, AStarActor);\n\n    // Setup a row + col lookup table that scores all moves on the gameboard\n    var _this = _possibleConstructorReturn(this, (AStarActor.__proto__ || Object.getPrototypeOf(AStarActor)).call(this, value));\n\n    _this.squares = {};\n    for (var a = 0; a < _constants2.default.BOARD_LENGTH; a++) {\n      for (var b = 0; b < _constants2.default.BOARD_LENGTH; b++) {\n        _this.squares[keyFromPosition([a, b])] = {};\n      }\n    }\n    return _this;\n  }\n\n  _createClass(AStarActor, [{\n    key: 'timestep',\n    value: function timestep(getActions, resetGame, position, targetPosition) {\n      // Find shortest path with A* algorithm\n      var iterations = 0;\n      var possible = new Set();\n      var seen = new Set();\n\n      var current = keyFromPosition(position);\n      var target = keyFromPosition(targetPosition);\n      this.squares[current].steps = 0;\n      this.squares[current].score = _base2.default.getManhattanDistance(position, targetPosition);\n\n      // Find a square with the shortest distance to the target\n      while (current !== target) {\n        seen.add(current);\n        possible.delete(current);\n\n        // Find the new squares reachable from current square\n        // and then add them to the set of possible squares\n        var currentPos = positionfromKey(current);\n        var actions = getActions(currentPos[0], currentPos[1]);\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = (0, _utils.shuffle)(actions)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var action = _step.value;\n\n            var actionPos = _base2.default.getNewPosition(action, currentPos);\n            var actionKey = keyFromPosition(actionPos);\n            if (seen.has(actionKey)) continue;\n            this.squares[actionKey].steps = this.squares[current].steps + 1;\n            this.squares[actionKey].score = this.squares[actionKey].steps + _base2.default.getManhattanDistance(actionPos, targetPosition);\n            possible.add(actionKey);\n          }\n\n          // Ensure that there are possible moves remaining\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (possible.size < 1) {\n          _constants2.default.LOGGING && console.warn('Cannot reach target: ', targetPosition);\n          resetGame();\n          return;\n        }\n\n        // Select possible square with the lowest score\n        var best = null;\n        var lowestScore = Number.POSITIVE_INFINITY;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = possible[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var key = _step2.value;\n\n            if (this.squares[key].score < lowestScore) {\n              best = key;\n              lowestScore = this.squares[key].score;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        current = best;\n\n        // Break loop if we have done too many iterations\n        iterations++;\n        if (iterations > 5000) {\n          _constants2.default.LOGGING && console.error('Too many iterations trying to reach square: ', targetPosition);\n          resetGame();\n          return;\n        }\n      }\n\n      // Backtrack from our current square to find the next move\n      while (this.squares[current].steps > 1) {\n        var _best = null;\n        var fewestSteps = Number.POSITIVE_INFINITY;\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = seen[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var _key = _step3.value;\n\n            var distance = _base2.default.getManhattanDistance(positionfromKey(current), positionfromKey(_key));\n            if (distance === 1 && this.squares[_key].steps < fewestSteps) {\n              _best = _key;\n              fewestSteps = this.squares[_key].steps;\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n\n        current = _best;\n      }\n      if (current) {\n        return _base2.default.getActionFromPositions(position, positionfromKey(current));\n      }\n    }\n  }]);\n\n  return AStarActor;\n}(_base2.default);\n\nexports.default = AStarActor;\n\n\nvar keyFromPosition = function keyFromPosition(pos) {\n  return pos[0] * 100 + pos[1];\n};\nvar positionfromKey = function positionfromKey(key) {\n  return [(key - key % 100) / 100, key % 100];\n};\n\nvar sameRow = function sameRow(sqA, sqB) {\n  return sqA.pos[0] === sqB.pos[0];\n};\n\nvar sameCol = function sameCol(sqA, sqB) {\n  return sqA.pos[1] === sqB.pos[1];\n};\n\nvar samePosition = function samePosition(sqA, sqB) {\n  return sameRow(sqA, sqB) && sameCol(sqA, sqB);\n};\n\n//# sourceURL=webpack:///./src/actors/a-star.js?");

/***/ }),

/***/ "./src/actors/base.js":
/*!****************************!*\
  !*** ./src/actors/base.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Represents the chicken/fox on the game board\nvar Actor = function () {\n  function Actor(value) {\n    var _this = this;\n\n    _classCallCheck(this, Actor);\n\n    this.reset = function () {\n      // Reset any global actor state\n      _this.numGames = 0;\n    };\n\n    this.type = null;\n    this.value = value;\n    this.numGames = 0;\n  }\n\n  _createClass(Actor, [{\n    key: 'timestep',\n    value: function timestep(getActions, resetGame, position, targetPosition) {\n      // Perform all actions for this timestep\n      // To be implemented by child class\n      return null;\n    }\n\n    // Transform data for transfer to web worker\n\n  }, {\n    key: 'serialize',\n    value: function serialize() {\n      return {\n        numGames: this.numGames,\n        type: this.type\n      };\n    }\n  }, {\n    key: 'deserialize',\n    value: function deserialize(data) {\n      this.numGames = data.numGames;\n    }\n  }, {\n    key: 'endGame',\n    value: function endGame() {\n      // Do whatever you need to at the end of a game\n      this.numGames++;\n    }\n  }, {\n    key: 'getValues',\n    value: function getValues(targetPosition) {\n      // Get a grid of values for a given target position\n      // normalized from 0 to 1\n      return null;\n    }\n\n    // Get the 'Manhatten distance' between 2 actors\n\n  }], [{\n    key: 'getManhattanDistance',\n    value: function getManhattanDistance(posA, posB) {\n      return Math.abs(posA[0] - posB[0]) + Math.abs(posA[1] - posB[1]);\n    }\n\n    // Get new position given a current position and an action\n\n  }, {\n    key: 'getNewPosition',\n    value: function getNewPosition(action, oldPosition) {\n      if (!action) return oldPosition;\n      return [oldPosition[0] + _constants2.default.VECTORS[action][0], oldPosition[1] + _constants2.default.VECTORS[action][1]];\n    }\n\n    // Get action given current position and new position\n\n  }, {\n    key: 'getActionFromPositions',\n    value: function getActionFromPositions(start, end) {\n      if (end[0] === start[0] + 1 && end[1] === start[1]) {\n        return _constants2.default.ACTIONS.SOUTH;\n      } else if (end[0] === start[0] - 1 && end[1] === start[1]) {\n        return _constants2.default.ACTIONS.NORTH;\n      } else if (end[0] === start[0] && end[1] === start[1] + 1) {\n        return _constants2.default.ACTIONS.EAST;\n      } else if (end[0] === start[0] && end[1] === start[1] - 1) {\n        return _constants2.default.ACTIONS.WEST;\n      }\n      return null;\n    }\n  }, {\n    key: 'samePosition',\n    value: function samePosition(posA, posB) {\n      return posA[0] == posB[0] && posA[1] == posB[1];\n    }\n  }]);\n\n  return Actor;\n}();\n\nexports.default = Actor;\n\n//# sourceURL=webpack:///./src/actors/base.js?");

/***/ }),

/***/ "./src/actors/greedy.js":
/*!******************************!*\
  !*** ./src/actors/greedy.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _OPPOSITE;\n\nvar _constants = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _base = __webpack_require__(/*! ./base */ \"./src/actors/base.js\");\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./src/actors/utils.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar OPPOSITE = (_OPPOSITE = {}, _defineProperty(_OPPOSITE, _constants2.default.ACTIONS.NORTH, _constants2.default.ACTIONS.SOUTH), _defineProperty(_OPPOSITE, _constants2.default.ACTIONS.SOUTH, _constants2.default.ACTIONS.NORTH), _defineProperty(_OPPOSITE, _constants2.default.ACTIONS.EAST, _constants2.default.ACTIONS.WEST), _defineProperty(_OPPOSITE, _constants2.default.ACTIONS.WEST, _constants2.default.ACTIONS.EAST), _OPPOSITE);\n\nvar GreedyActor = function (_Actor) {\n  _inherits(GreedyActor, _Actor);\n\n  function GreedyActor(name, value, board) {\n    _classCallCheck(this, GreedyActor);\n\n    var _this = _possibleConstructorReturn(this, (GreedyActor.__proto__ || Object.getPrototypeOf(GreedyActor)).call(this, name, value, board));\n\n    _this.isFollowing = true;\n    return _this;\n  }\n\n  _createClass(GreedyActor, [{\n    key: 'flee',\n    value: function flee() {\n      this.isFollowing = false;\n      return this;\n    }\n  }, {\n    key: 'follow',\n    value: function follow() {\n      this.isFollowing = true;\n      return this;\n    }\n  }, {\n    key: 'timestep',\n    value: function timestep(getActions, resetGame, position, targetPosition) {\n      var row = position[0];\n      var col = position[1];\n      var targetRow = targetPosition[0];\n      var targetCol = targetPosition[1];\n\n      var goUp = this.isFollowing ? row > targetRow : row <= targetRow;\n      var goDown = this.isFollowing ? row < targetRow : row >= targetRow;\n      var goRight = this.isFollowing ? col < targetCol : col >= targetCol;\n      var goLeft = this.isFollowing ? col > targetCol : col <= targetCol;\n\n      var actions = getActions(row, col);\n\n      var chosenActions = [];\n\n      if (goLeft && actions.includes(_constants2.default.ACTIONS.WEST)) chosenActions.push(_constants2.default.ACTIONS.WEST);\n      if (goRight && actions.includes(_constants2.default.ACTIONS.EAST)) chosenActions.push(_constants2.default.ACTIONS.EAST);\n      if (goUp && actions.includes(_constants2.default.ACTIONS.NORTH)) chosenActions.push(_constants2.default.ACTIONS.NORTH);\n      if (goDown && actions.includes(_constants2.default.ACTIONS.SOUTH)) chosenActions.push(_constants2.default.ACTIONS.SOUTH);\n\n      if (chosenActions.length < 1) {\n        return (0, _utils.randomChoice)(actions);\n      } else {\n        return (0, _utils.randomChoice)(chosenActions);\n      }\n    }\n  }]);\n\n  return GreedyActor;\n}(_base2.default);\n\nexports.default = GreedyActor;\n\n//# sourceURL=webpack:///./src/actors/greedy.js?");

/***/ }),

/***/ "./src/actors/index.js":
/*!*****************************!*\
  !*** ./src/actors/index.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _constants = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _player = __webpack_require__(/*! ./player */ \"./src/actors/player.js\");\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _greedy = __webpack_require__(/*! ./greedy */ \"./src/actors/greedy.js\");\n\nvar _greedy2 = _interopRequireDefault(_greedy);\n\nvar _random = __webpack_require__(/*! ./random */ \"./src/actors/random.js\");\n\nvar _random2 = _interopRequireDefault(_random);\n\nvar _aStar = __webpack_require__(/*! ./a-star */ \"./src/actors/a-star.js\");\n\nvar _aStar2 = _interopRequireDefault(_aStar);\n\nvar _temporalDifference = __webpack_require__(/*! ./temporal-difference */ \"./src/actors/temporal-difference.js\");\n\nvar _temporalDifference2 = _interopRequireDefault(_temporalDifference);\n\nvar _monteCarlo = __webpack_require__(/*! ./monte-carlo */ \"./src/actors/monte-carlo.js\");\n\nvar _monteCarlo2 = _interopRequireDefault(_monteCarlo);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: Fix monte carlo\nvar CHICKEN_ALGOS = {\n  GREEDY: 'greedy flight',\n  TEMPORAL_DIFFERENCE: 'temporal difference',\n  RANDOM: 'random',\n  // MONTE_CARLO: 'monte carlo',\n  PLAYER: 'player'\n};\n\nvar FOX_ALGOS = {\n  // MONTE_CARLO: 'monte carlo',\n  TEMPORAL_DIFFERENCE: 'temporal difference',\n  A_STAR: 'a* search',\n  GREEDY: 'greedy pursuit',\n  RANDOM: 'random',\n  PLAYER: 'player'\n};\n\nvar LEARNING_ALGOS = ['temporal difference'];\n\nvar chickenActors = {};\nvar foxActors = {};\n\nvar getChickenActor = function getChickenActor(algo) {\n  var cachedActor = chickenActors[algo];\n  if (cachedActor) {\n    return cachedActor;\n  } else {\n    var newActor = buildChickenActor(algo);\n    newActor.type = algo;\n    chickenActors[algo] = newActor;\n    return newActor;\n  }\n};\n\nvar getFoxActor = function getFoxActor(algo) {\n  var cachedActor = foxActors[algo];\n  if (cachedActor) {\n    return cachedActor;\n  } else {\n    var newActor = buildFoxActor(algo);\n    newActor.type = algo;\n    foxActors[algo] = newActor;\n    return newActor;\n  }\n};\n\nvar buildChickenActor = function buildChickenActor(algo) {\n  switch (algo) {\n    case CHICKEN_ALGOS.TEMPORAL_DIFFERENCE:\n      return new _temporalDifference2.default(_constants2.default.CHICKEN).flee();\n    case CHICKEN_ALGOS.MONTE_CARLO:\n      return new _monteCarlo2.default(_constants2.default.CHICKEN).flee();\n    case CHICKEN_ALGOS.RANDOM:\n      return new _random2.default(_constants2.default.CHICKEN);\n    case CHICKEN_ALGOS.PLAYER:\n      return new _player2.default(_constants2.default.CHICKEN);\n    case CHICKEN_ALGOS.GREEDY:\n      return new _greedy2.default(_constants2.default.CHICKEN).flee();\n    default:\n      throw Error('Algorithm ' + algo + ' not recognized for chicken');\n  }\n};\n\nvar buildFoxActor = function buildFoxActor(algo) {\n  switch (algo) {\n    case FOX_ALGOS.TEMPORAL_DIFFERENCE:\n      return new _temporalDifference2.default(_constants2.default.FOX).follow();\n    case FOX_ALGOS.MONTE_CARLO:\n      return new _monteCarlo2.default(_constants2.default.FOX).follow();\n    case FOX_ALGOS.A_STAR:\n      return new _aStar2.default(_constants2.default.FOX);\n    case FOX_ALGOS.RANDOM:\n      return new _random2.default(_constants2.default.FOX);\n    case FOX_ALGOS.PLAYER:\n      return new _player2.default(_constants2.default.FOX);\n    case FOX_ALGOS.GREEDY:\n      return new _greedy2.default(_constants2.default.FOX).follow();\n    default:\n      throw Error('Algorithm ' + algo + ' not recognized for fox');\n  }\n};\n\nmodule.exports = {\n  LEARNING_ALGOS: LEARNING_ALGOS,\n  CHICKEN_ALGOS: CHICKEN_ALGOS,\n  FOX_ALGOS: FOX_ALGOS,\n  getFoxActor: getFoxActor,\n  getChickenActor: getChickenActor,\n  buildChickenActor: buildChickenActor,\n  buildFoxActor: buildFoxActor\n};\n\n//# sourceURL=webpack:///./src/actors/index.js?");

/***/ }),

/***/ "./src/actors/monte-carlo.js":
/*!***********************************!*\
  !*** ./src/actors/monte-carlo.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _base = __webpack_require__(/*! ./base */ \"./src/actors/base.js\");\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _stateSpace = __webpack_require__(/*! ./state-space */ \"./src/actors/state-space.js\");\n\nvar _stateSpace2 = _interopRequireDefault(_stateSpace);\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./src/actors/utils.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MonteCarloActor = function (_Actor) {\n  _inherits(MonteCarloActor, _Actor);\n\n  function MonteCarloActor(value) {\n    _classCallCheck(this, MonteCarloActor);\n\n    var _this = _possibleConstructorReturn(this, (MonteCarloActor.__proto__ || Object.getPrototypeOf(MonteCarloActor)).call(this, value));\n\n    _this.reset = function () {\n      // Reset any global actor state\n      _this.numGames = 0;\n      _this.seen = [];\n      _this.episodeReward = 0;\n      _this.states = new _stateSpace2.default(function () {\n        return {\n          value: 0,\n          visits: 0\n        };\n      });\n    };\n\n    _this.isFleeing = true;\n    _this.episodeReward = 0;\n    _this.states = new _stateSpace2.default(function () {\n      return {\n        value: 0,\n        visits: 0\n      };\n    });\n    _this.seen = [];\n    return _this;\n  }\n\n  _createClass(MonteCarloActor, [{\n    key: 'serialize',\n    value: function serialize() {\n      return {\n        numGames: this.numGames,\n        type: this.type,\n        states: this.states._states\n      };\n    }\n  }, {\n    key: 'deserialize',\n    value: function deserialize(data) {\n      this.seen = [];\n      this.episodeReward = 0;\n      this.numGames = data.numGames;\n      this.states._states = data.states;\n    }\n  }, {\n    key: 'flee',\n    value: function flee() {\n      this.isFleeing = true;\n      return this;\n    }\n  }, {\n    key: 'follow',\n    value: function follow() {\n      this.isFleeing = false;\n      return this;\n    }\n  }, {\n    key: 'getValues',\n    value: function getValues(targetPosition) {\n      var arr = [];\n      var ranking = [];\n      // Get a grid of values for a given target position\n      // normalized from 0 to 1\n      for (var a = 0; a < _constants2.default.BOARD_LENGTH; a++) {\n        // actor row\n        for (var b = 0; b < _constants2.default.BOARD_LENGTH; b++) {\n          // actor col\n          if (!arr[a]) arr[a] = [];\n          var key = this.states.getKey(a, b, targetPosition[0], targetPosition[1]);\n          var val = this.states.getState(key).value;\n          arr[a].push(val);\n          ranking.push(val);\n        }\n      }\n      // Normalize results to range [0,1]\n      ranking.sort(function (a, b) {\n        return a > b;\n      });\n      for (var _a = 0; _a < _constants2.default.BOARD_LENGTH; _a++) {\n        // actor row\n        for (var _b = 0; _b < _constants2.default.BOARD_LENGTH; _b++) {\n          // actor col\n          arr[_a][_b] = ranking.indexOf(arr[_a][_b]) / (ranking.length - 1);\n        }\n      }\n      return arr;\n    }\n  }, {\n    key: 'getReward',\n    value: function getReward(distance) {\n      if (this.isFleeing) {\n        // Encourage a fleer to keep away\n        return distance < 5 ? -1 : 1;\n      } else {\n        // Encourage a follower to close the distance\n        return -1 * distance;\n      }\n    }\n  }, {\n    key: 'endGame',\n    value: function endGame() {\n      // Update our value function with information from this episode\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.seen[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var seenKey = _step.value;\n\n          var state = this.states.getState(seenKey);\n          state.visits += 1;\n          var error = this.episodeReward - state.value;\n          state.value += error / state.visits;\n        }\n        // Reset our reward and seen states\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.episodeReward = 0;\n      this.seen = [];\n      this.numGames++;\n    }\n  }, {\n    key: 'timestep',\n    value: function timestep(getActions, resetGame, position, targetPosition) {\n      // Record the reward we got for this timestep\n      var distance = _base2.default.getManhattanDistance(position, targetPosition);\n      this.episodeReward += this.getReward(distance);\n\n      // Record our visit to this state\n      var lookupKey = this.states.getKeyFromPositions(position, targetPosition);\n      this.seen.push(lookupKey);\n\n      // Evaluate all possible actions\n      var actions = getActions(position[0], position[1]);\n      actions.push(null); // Give the actor the option of not moving\n\n      // We're using e-greedy policy improvement strategy\n      // There is an epsilon chance of randomly picking our next move\n      var epsilon = 1 / Math.sqrt(this.numGames);\n      var chosenAction = void 0;\n      if (Math.random() < epsilon) {\n        chosenAction = this.chooseActionRandomly(actions);\n      } else {\n        chosenAction = this.chooseActionGreedily(actions, position, targetPosition);\n      }\n      return chosenAction;\n    }\n  }, {\n    key: 'chooseActionRandomly',\n    value: function chooseActionRandomly(actions) {\n      return (0, _utils.randomChoice)(actions);\n    }\n  }, {\n    key: 'chooseActionGreedily',\n    value: function chooseActionGreedily(actions, position, targetPosition) {\n      // Using the current value function, greedily choose where we're going to go next\n      var bestAction = null;\n      var bestValue = Number.NEGATIVE_INFINITY;\n      var newPosition = position;\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = actions[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var action = _step2.value;\n\n          // Find the actor's new position given the action\n          var actionPosition = void 0;\n          if (action) {\n            actionPosition = _base2.default.getNewPosition(action, position);\n          } else {\n            actionPosition = position;\n          }\n\n          // If this new action is more valuable than our best option, choose that\n          var actionValue = this.states.getStateFromPositions(actionPosition, targetPosition).value;\n          if (actionValue > bestValue) {\n            bestValue = actionValue;\n            bestAction = action;\n            newPosition = actionPosition;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return bestAction;\n    }\n  }]);\n\n  return MonteCarloActor;\n}(_base2.default);\n\nexports.default = MonteCarloActor;\n\n//# sourceURL=webpack:///./src/actors/monte-carlo.js?");

/***/ }),

/***/ "./src/actors/player.js":
/*!******************************!*\
  !*** ./src/actors/player.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! ./base */ \"./src/actors/base.js\");\n\nvar _base2 = _interopRequireDefault(_base);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MOVES = {\n  ArrowDown: 'SOUTH',\n  ArrowUp: 'NORTH',\n  ArrowLeft: 'WEST',\n  ArrowRight: 'EAST',\n  s: 'SOUTH',\n  w: 'NORTH',\n  a: 'WEST',\n  d: 'EAST'\n\n  // Allows player to control the actor\n};\nvar PlayerActor = function (_Actor) {\n  _inherits(PlayerActor, _Actor);\n\n  function PlayerActor(value) {\n    _classCallCheck(this, PlayerActor);\n\n    var _this = _possibleConstructorReturn(this, (PlayerActor.__proto__ || Object.getPrototypeOf(PlayerActor)).call(this, value));\n\n    _this.chosenNextAction = null;\n    document.addEventListener('keydown', function (e) {\n      _this.chosenNextAction = MOVES[e.key] || null;\n    });\n    return _this;\n  }\n\n  _createClass(PlayerActor, [{\n    key: 'timestep',\n    value: function timestep(getActions, resetGame, position, targetPosition) {\n      var nextAction = null;\n      if (getActions(position[0], position[1]).includes(this.chosenNextAction)) {\n        nextAction = this.chosenNextAction;\n        this.chosenNextAction = null;\n      }\n      return nextAction;\n    }\n  }]);\n\n  return PlayerActor;\n}(_base2.default);\n\nexports.default = PlayerActor;\n\n//# sourceURL=webpack:///./src/actors/player.js?");

/***/ }),

/***/ "./src/actors/random.js":
/*!******************************!*\
  !*** ./src/actors/random.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! ./base */ \"./src/actors/base.js\");\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./src/actors/utils.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Totally random actor\nvar RandomActor = function (_Actor) {\n  _inherits(RandomActor, _Actor);\n\n  function RandomActor() {\n    _classCallCheck(this, RandomActor);\n\n    return _possibleConstructorReturn(this, (RandomActor.__proto__ || Object.getPrototypeOf(RandomActor)).apply(this, arguments));\n  }\n\n  _createClass(RandomActor, [{\n    key: 'timestep',\n    value: function timestep(getActions, resetGame, position, targetPosition) {\n      return (0, _utils.randomChoice)(getActions(position[0], position[1]));\n    }\n  }]);\n\n  return RandomActor;\n}(_base2.default);\n\nexports.default = RandomActor;\n\n//# sourceURL=webpack:///./src/actors/random.js?");

/***/ }),

/***/ "./src/actors/state-space.js":
/*!***********************************!*\
  !*** ./src/actors/state-space.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // Build a state space made of 4 variables\n// - chicken row (a)\n// - chicken column (b)\n// - fox row (c)\n// - fox column (d)\n// initialize each state as an object\n// Store these values in nested hash tables, indexed by [a][b][c][d]\n\n\nvar _constants = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar StateSpace = function () {\n  function StateSpace(initState) {\n    var _this = this;\n\n    _classCallCheck(this, StateSpace);\n\n    this.getKeyFromPositions = function (chickenPos, foxPos) {\n      return _this.getKey(chickenPos[0], chickenPos[1], foxPos[0], foxPos[1]);\n    };\n\n    this._states = {};\n    for (var a = 0; a < _constants2.default.BOARD_LENGTH; a++) {\n      // chicken row\n      for (var b = 0; b < _constants2.default.BOARD_LENGTH; b++) {\n        // chicken col\n        for (var c = 0; c < _constants2.default.BOARD_LENGTH; c++) {\n          // fox row\n          for (var d = 0; d < _constants2.default.BOARD_LENGTH; d++) {\n            // fox col\n            this._states[this.getKey(a, b, c, d)] = initState();\n          }\n        }\n      }\n    }\n  }\n\n  _createClass(StateSpace, [{\n    key: 'getState',\n    value: function getState(key) {\n      // Return mutable state object\n      return this._states[key];\n    }\n  }, {\n    key: 'getStateFromPositions',\n    value: function getStateFromPositions(chickenPos, foxPos) {\n      return this.getState(this.getKeyFromPositions(chickenPos, foxPos));\n    }\n  }, {\n    key: 'getKey',\n    value: function getKey(a, b, c, d) {\n      // Represent a state as an integer 00000000 to 99999999,\n      // assume max 99 rows / cols and 2 positions\n      return 1000000 * a + 10000 * b + 100 * c + d;\n    }\n  }]);\n\n  return StateSpace;\n}();\n\nexports.default = StateSpace;\n\n//# sourceURL=webpack:///./src/actors/state-space.js?");

/***/ }),

/***/ "./src/actors/temporal-difference.js":
/*!*******************************************!*\
  !*** ./src/actors/temporal-difference.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _base = __webpack_require__(/*! ./base */ \"./src/actors/base.js\");\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _stateSpace = __webpack_require__(/*! ./state-space */ \"./src/actors/state-space.js\");\n\nvar _stateSpace2 = _interopRequireDefault(_stateSpace);\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./src/actors/utils.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ALPHA = 0.9;\nvar GAMMA = 0.9;\n\nvar TemporalDifferenceActor = function (_Actor) {\n  _inherits(TemporalDifferenceActor, _Actor);\n\n  function TemporalDifferenceActor(value) {\n    _classCallCheck(this, TemporalDifferenceActor);\n\n    var _this = _possibleConstructorReturn(this, (TemporalDifferenceActor.__proto__ || Object.getPrototypeOf(TemporalDifferenceActor)).call(this, value));\n\n    _this.reset = function () {\n      // Reset any global actor state\n      _this.numGames = 0;\n      _this.states = new _stateSpace2.default(function () {\n        return { value: 0.1 * Math.random() };\n      });\n    };\n\n    _this.isFleeing = true;\n    _this.states = new _stateSpace2.default(function () {\n      return { value: 0.1 * Math.random() };\n    });\n    return _this;\n  }\n\n  // Transform data for transfer to web worker\n\n\n  _createClass(TemporalDifferenceActor, [{\n    key: 'serialize',\n    value: function serialize() {\n      return {\n        numGames: this.numGames,\n        type: this.type,\n        states: this.states._states\n      };\n    }\n  }, {\n    key: 'deserialize',\n    value: function deserialize(data) {\n      this.numGames = data.numGames;\n      this.states._states = data.states;\n    }\n  }, {\n    key: 'flee',\n    value: function flee() {\n      this.isFleeing = true;\n      return this;\n    }\n  }, {\n    key: 'follow',\n    value: function follow() {\n      this.isFleeing = false;\n      return this;\n    }\n  }, {\n    key: 'getValues',\n    value: function getValues(targetPosition) {\n      var arr = [];\n      var ranking = [];\n      // Get a grid of values for a given target position\n      // normalized from 0 to 1\n      for (var a = 0; a < _constants2.default.BOARD_LENGTH; a++) {\n        // actor row\n        for (var b = 0; b < _constants2.default.BOARD_LENGTH; b++) {\n          // actor col\n          if (!arr[a]) arr[a] = [];\n          var key = this.states.getKey(a, b, targetPosition[0], targetPosition[1]);\n          var val = this.states.getState(key).value;\n          arr[a].push(val);\n          ranking.push(val);\n        }\n      }\n      // Normalize results to range [0,1]\n      ranking.sort(function (a, b) {\n        return a > b;\n      });\n      for (var _a = 0; _a < _constants2.default.BOARD_LENGTH; _a++) {\n        // actor row\n        for (var _b = 0; _b < _constants2.default.BOARD_LENGTH; _b++) {\n          // actor col\n          arr[_a][_b] = ranking.indexOf(arr[_a][_b]) / (ranking.length - 1);\n        }\n      }\n      return arr;\n    }\n  }, {\n    key: 'getReward',\n    value: function getReward(distance) {\n      if (this.isFleeing) {\n        // Encourage a fleer to keep away\n        if (distance == 1) {\n          return -1000;\n        } else {\n          return 0;\n        }\n      } else {\n        // Encourage a follower to close the distance\n        if (distance == 1) {\n          return 1000;\n        } else {\n          return 0;\n        }\n      }\n    }\n  }, {\n    key: 'timestep',\n    value: function timestep(getActions, resetGame, position, targetPosition) {\n      // Evaluate all possible actions\n      var actions = getActions(position[0], position[1]);\n      actions.push(null); // Give the actor the option of not moving\n\n      // We're using e-greedy policy improvement strategy\n      // There is an epsilon chance of randomly picking our next move\n      var epsilon = 1 / Math.sqrt(this.numGames);\n      var chosenAction = void 0;\n      if (Math.random() < epsilon) {\n        chosenAction = this.chooseActionRandomly(actions);\n      } else {\n        chosenAction = this.chooseActionGreedily(actions, position, targetPosition);\n      }\n      var newPosition = _base2.default.getNewPosition(chosenAction, position);\n\n      // Using the expected value of our next move, update the value function\n      // with the temporal difference algorithm\n      var distance = _base2.default.getManhattanDistance(position, targetPosition);\n      var reward = this.getReward(distance);\n      var currentValue = this.states.getStateFromPositions(position, targetPosition).value;\n      var expectedValue = this.states.getStateFromPositions(newPosition, targetPosition).value;\n      var targetValue = reward + GAMMA * expectedValue;\n      var error = targetValue - currentValue;\n      var newValue = currentValue + ALPHA * error;\n      var currentState = this.states.getStateFromPositions(position, targetPosition);\n      currentState.value = newValue;\n\n      return chosenAction;\n    }\n  }, {\n    key: 'chooseActionRandomly',\n    value: function chooseActionRandomly(actions) {\n      return (0, _utils.randomChoice)(actions);\n    }\n  }, {\n    key: 'chooseActionGreedily',\n    value: function chooseActionGreedily(actions, position, targetPosition) {\n      // Using the current value function, greedily choose where we're going to go next\n      var bestAction = null;\n      var bestValue = Number.NEGATIVE_INFINITY;\n      var newPosition = position;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = actions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var action = _step.value;\n\n          // Find the actor's new position given the action\n          var actionPosition = void 0;\n          if (action) {\n            actionPosition = _base2.default.getNewPosition(action, position);\n          } else {\n            actionPosition = position;\n          }\n\n          // If this new action is more valuable than our best option, choose that\n          var actionValue = this.states.getStateFromPositions(actionPosition, targetPosition).value;\n          if (actionValue > bestValue) {\n            bestValue = actionValue;\n            bestAction = action;\n            newPosition = actionPosition;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return bestAction;\n    }\n  }]);\n\n  return TemporalDifferenceActor;\n}(_base2.default);\n\nexports.default = TemporalDifferenceActor;\n\n//# sourceURL=webpack:///./src/actors/temporal-difference.js?");

/***/ }),

/***/ "./src/actors/utils.js":
/*!*****************************!*\
  !*** ./src/actors/utils.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// Thanks StackOverflow!\nvar shuffle = function shuffle(a) {\n    var j, x, i;\n    for (i = a.length - 1; i > 0; i--) {\n        j = Math.floor(Math.random() * (i + 1));\n        x = a[i];\n        a[i] = a[j];\n        a[j] = x;\n    }\n    return a;\n};\n\nvar randomChoice = function randomChoice(a) {\n    return a[Math.floor(Math.random() * a.length)];\n};\n\nmodule.exports = { shuffle: shuffle, randomChoice: randomChoice };\n\n//# sourceURL=webpack:///./src/actors/utils.js?");

/***/ }),

/***/ "./src/constants.js":
/*!**************************!*\
  !*** ./src/constants.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  // Game constants\n  BOARD_LENGTH: 14, // squares\n  MAX_LENGTH: 900, // px\n  TICK: 180, // ms\n  TRAINING_STEPS: 1000 * 1000, // 10e6 steps\n  LOGGING: false,\n  TREE_DENSITY: 0.15,\n  MAX_EPISODE_LENGTH: 500, // steps\n\n  ACTIONS: {\n    NORTH: 'NORTH',\n    SOUTH: 'SOUTH',\n    EAST: 'EAST',\n    WEST: 'WEST'\n  },\n\n  VECTORS: {\n    NORTH: [-1, 0],\n    SOUTH: [1, 0],\n    EAST: [0, 1],\n    WEST: [0, -1]\n  },\n\n  // Sprites\n  EMPTY: 'EMPTY',\n  CHICKEN: 'CHICKEN',\n  FOX: 'FOX',\n  TREE: 'TREE',\n\n  // Sprite rendering\n  SRC_LENGTH: 256, // px\n  PADDING: 5 // px\n};\n\n//# sourceURL=webpack:///./src/constants.js?");

/***/ }),

/***/ "./src/gameboard.js":
/*!**************************!*\
  !*** ./src/gameboard.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _constants = __webpack_require__(/*! ./constants */ \"./src/constants.js\");\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Game model\nvar GameBoard = function GameBoard(grid) {\n  var _this = this;\n\n  _classCallCheck(this, GameBoard);\n\n  this.addFox = function (actor) {\n    _this.foxActor = actor;\n    _this.setActorPosition(_this.foxActor, _this.foxPosition);\n  };\n\n  this.addChicken = function (actor) {\n    _this.chickenActor = actor;\n    _this.setActorPosition(_this.chickenActor, _this.chickenPosition);\n  };\n\n  this.setActorPosition = function (actor, position) {\n    _this.grid[position[0]][position[1]] = actor.value;\n  };\n\n  this.clearPosition = function (pos) {\n    _this.grid[pos[0]][pos[1]] = _constants2.default.EMPTY;\n  };\n\n  this.getActions = function (row, col) {\n    var actions = [];\n    var max = _constants2.default.BOARD_LENGTH - 1;\n    if (row < 0 || col < 0 || col > max || row > max) return actions;\n    row > 0 && _this.grid[row - 1][col] !== _constants2.default.TREE && actions.push(_constants2.default.ACTIONS.NORTH);\n    row < max && _this.grid[row + 1][col] !== _constants2.default.TREE && actions.push(_constants2.default.ACTIONS.SOUTH);\n    col > 0 && _this.grid[row][col - 1] !== _constants2.default.TREE && actions.push(_constants2.default.ACTIONS.WEST);\n    col < max && _this.grid[row][col + 1] !== _constants2.default.TREE && actions.push(_constants2.default.ACTIONS.EAST);\n    return actions;\n  };\n\n  this.getRandomPosition = function () {\n    while (true) {\n      var position = [randomScalar(), randomScalar()];\n      if (_this.grid[position[0]][position[1]] === _constants2.default.EMPTY) {\n        return position;\n      }\n    }\n  };\n\n  this.reset = function () {\n    _this.foxActor.endGame();\n    _this.chickenActor.endGame();\n\n    _this.clearPosition(_this.foxPosition);\n    _this.clearPosition(_this.chickenPosition);\n\n    _this.foxPosition = _this.getRandomPosition();\n    _this.chickenPosition = _this.getRandomPosition();\n\n    _this.setActorPosition(_this.foxActor, _this.foxPosition);\n    _this.setActorPosition(_this.chickenActor, _this.chickenPosition);\n  };\n\n  this.run = function (reset) {\n    if (!_this.foxActor || !_this.chickenActor) return;\n    _this.gameIterations++;\n\n    var previousFoxPosition = [_this.foxPosition[0], _this.foxPosition[1]];\n    var foxAction = _this.foxActor.timestep(_this.getActions, reset, _this.foxPosition, _this.chickenPosition);\n    _this.move(_this.foxActor, _this.foxPosition, foxAction);\n\n    var chickenAction = _this.chickenActor.timestep(_this.getActions, reset, _this.chickenPosition, previousFoxPosition);\n    _this.move(_this.chickenActor, _this.chickenPosition, chickenAction);\n\n    var shouldReset = _this.gameIterations >= _constants2.default.MAX_EPISODE_LENGTH || distance(_this.foxPosition, _this.chickenPosition) < 2;\n    if (shouldReset) {\n      // Game over\n      _this.gameIterations = 0;\n      reset();\n    }\n  };\n\n  this.move = function (actor, position, action) {\n    if (!action) return;\n    _this.clearPosition(position);\n    position[0] += _constants2.default.VECTORS[action][0];\n    position[1] += _constants2.default.VECTORS[action][1];\n    _this.setActorPosition(actor, position);\n  };\n\n  this.grid = grid;\n\n  this.foxActor = null;\n  this.chickenActor = null;\n  this.foxPosition = this.getRandomPosition();\n  this.chickenPosition = this.getRandomPosition();\n\n  this.timerId = null;\n  this.isTraining = false;\n  this.gameIterations = 0;\n};\n\nexports.default = GameBoard;\n\n\nvar samePosition = function samePosition(posA, posB) {\n  return posA[0] === posB[0] && posA[1] === posB[1];\n};\n\nvar distance = function distance(posA, posB) {\n  return Math.abs(posA[0] - posB[0]) + Math.abs(posA[1] - posB[1]);\n};\n\nvar randomScalar = function randomScalar() {\n  return Math.floor(Math.random() * _constants2.default.BOARD_LENGTH);\n};\n\n//# sourceURL=webpack:///./src/gameboard.js?");

/***/ })

/******/ });